<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="UTF-8"/>
    <title>10.2.1.2 SLAAC Operation</title>
    <!-- Content -->
    <link type="text/css" rel="stylesheet" href="../../common/styles/course.css"/>
	<script type="text/javascript" src="../../common/scripts/jquery_bundle.min.js"></script>
	<script type="text/javascript" src="../../common-ext/scripts/page.js"></script>
    <script>
      var myLayout; 
      $(document).ready(function () {
        var frame = document.getElementById('mainFrame');
        if (isTextOnly(window)) {
          frame.setAttribute('src', 'media_10.2.1.2_longdesc.txt');
        } else {
          frame.setAttribute('src', 'media/index.html');
        }
    	myLayout = $('body').layout({
          west__size: 300,
          west__minSize: 300,
          center__minWidth: 100,
          stateManagement__enabled: true,
          maskIframesOnResize: true,
          livePaneResizing: true,
          onresize_end: resizeTextDiv,
          stateManagement__cookie__name: "ui_pane",
          stateManagement__cookie__expires: 1,
          stateManagement__cookie__path: "/"
        });
      });
      function resizeTextDiv() {
        var DivHeight = document.getElementById("header").offsetHeight;
        document.getElementById("content").style.top = String(DivHeight) + 'px';
      }
    </script>
  </head>
  <body class="onecolumn" onLoad="resizeTextDiv()">
    <div class="ui-layout-west">
      <div id="header">
        <h1>Dynamic Host Configuration Protocol v6</h1>
        <h2>SLAAC and DHCPv6</h2>
      </div>
      <div id="content">
          <p>A router must be enabled as an IPv6 router before it can send RA messages. To enable IPv6 routing, a router is configured with the following command:</p>
          <p></p>
          <p>
            <span class="cmd">Router(config)# </span>
            <span class="cmd">
              <b>ipv6 unicast-routing</b>
            </span>
          </p>
          <p></p>
          <p>1. In the example topology shown in Figure 1, PC1 is configured to obtain IPv6 addressing automatically. Since booting, PC1 has not received an RA message, so it sends an RS message to the all-routers multicast address to inform the local IPv6 router that it needs an RA.</p>
          <p></p>
          <p>2. As shown in Figure 2, R1 receives the RS message and responds with an RA message. Included in the RA message are the prefix and prefix length of the network. The RA message is sent to the IPv6 all-nodes multicast address FF02::1, with the link-local address of the router as the IPv6 source address. </p>
          <p></p>
          <p>3. PC1 receives the RA message containing the prefix and prefix length for the local network. PC1 will use this information to create its own IPv6 global unicast address. PC1 now has a 64-bit network prefix, but needs a 64-bit Interface ID (IID) to create a global unicast address. </p>
          <p></p>
          <p>There are two ways PC1 can create its own unique IID:</p>
          <p>
            <ul>
              <li>
                <b>EUI-64 </b>- Using the EUI-64 process, PC1 will create an IID using its 48-bit MAC address.</li>
            </ul>
          </p>
          <p>
            <ul>
              <li>
                <b>Randomly generated </b>- The 64-bit IID can be a random number generated by the client operating system. </li>
            </ul>
          </p>
          <p></p>
          <p>As shown in Figure 3, PC1 can create a 128-bit IPv6 global unicast address by combining the 64-bit prefix with the 64-bit IID. PC1 will use the link-local address of the router as its IPv6 default gateway address.</p>
          <p></p>
          <p>4. Because SLAAC is a stateless process, before PC1 can use this newly created IPv6 address it must verify that it is unique. As shown in Figure 4, PC1 sends an ICMPv6 Neighbor Solicitation message with its own address as the target IPv6 address. If no other devices respond with a Neighbor Advertisement message, then the address is unique and can be used by PC1. If a Neighbor Advertisement is received by PC1 then the address is not unique and the operating system has  to determine a new Interface ID to use. </p>
          <p></p>
          <p>This process is part of ICMPv6 Neighbor Discovery and is known as Duplicate Address Detection (DAD).</p>
        </div>
    </div>
    <iframe id="mainFrame" name="mainFrame" frameborder="0" class="ui-layout-center" alt="interactive graphic"></iframe>
  </body>
</html>
